<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Three.js 街デモ</title>
  <style>body { margin: 0; overflow: hidden; }</style>

  <!-- Google Analytics 設定 閲覧数の測定用です。-->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-B8X9Y12345"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-E7Z2FM74H9');
  </script>
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.169.0/build/three.module.js"
    }
  }
  </script>
</head>
<body>
  <div id="joystick-left" class="joystick-zone"></div>
  <div id="joystick-right" class="joystick-zone"></div>

  <style>
    
    .joystick-zone {
      position: absolute;
      width: 150px;
      height: 150px;
      bottom: 20px;
      z-index: 10;
    }

    #joystick-left {
      left: 20px;
    }

    #joystick-right {
      right: 20px;
    }

  </style>
  
<!--   
  <button id="speed-up" class="no-touch-highlight" style="position: fixed; left: 20px; bottom: 200px; width: 60px; height: 60px; font-size: 24px; border-radius: 30px; z-index: 20; opacity: 0.3;">▶︎▷</button>

  <button id="speed-down" class="no-touch-highlight" style="position: fixed; left: 95px; bottom: 200px; width: 60px; height: 60px; font-size: 24px; border-radius: 30px; z-index: 20; opacity: 0.3;">◀︎◁</button>
  
  <button id="btn-up" class="no-touch-highlight" style="position: fixed; left: 20px; bottom: 120px; width: 60px; height: 60px; font-size: 24px; border-radius: 30px; z-index: 20; opacity: 0.3;">🔺</button>
  
  <button id="btn-down" class="no-touch-highlight" style="position: fixed; left: 20px; bottom: 40px; width: 60px; height: 60px; font-size: 24px; border-radius: 30px; z-index: 20; opacity: 0.3;">🔻</button> -->
  <style>
    .control-button {
      position: fixed;
      width: 60px;
      height: 60px;
      font-size: 24px;
      border: none;
      border-radius: 30px;
      background-color: rgba(255, 255, 255, 0.2); /* 透過っぽい */
      color: white;
      z-index: 20;
      backdrop-filter: blur(4px); /* iOSっぽいガラス感 */
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      transition: all 0.1s ease-in-out;
      
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
    }
    
    .control-button:active {
      transform: scale(0.93);
      opacity: 0.5;
    }

    .control-square-button {
    position: fixed;
    width: 400px;
    height: 40px;
    font-size: 24px;
    border: none;
    border-radius: 4px; /* ← 四角っぽい角丸（完全に四角なら 0 に） */
    background-color: rgba(255, 255, 255, 0.2);
    color: white;
    z-index: 20;
    backdrop-filter: blur(4px);
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    transition: all 0.1s ease-in-out;

    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
  }

  /* ホバー（マウスを乗せたとき）で暗くする */
  .control-button:hover {
    filter: brightness(85%);
    cursor: pointer;
  }

  /* クリック中（押してる最中）でさらに暗くする */
  .control-button:active {
    filter: brightness(70%);
  }
</style>

  </style>
  
  <button id="speed-up" class="control-button" style="left: 20px; bottom: 200px;">▶︎▷</button>
  <button id="speed-down" class="control-button" style="left: 95px; bottom: 200px;">◀︎◁</button>
  <button id="btn-up" class="control-button" style="left: 20px; bottom: 120px;">🔺</button>
  <button id="btn-down" class="control-button" style="left: 20px; bottom: 40px;">🔻</button>
      
  <!-- 左スティック（左下に表示） -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/nipplejs/0.8.6/nipplejs.min.js"></script>
  <div id="left-stick" style="user-select: none; -webkit-tap-highlight-color: transparent; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; position: fixed; left: 7vw; bottom: 0; width: 40vw; height: 60vh; z-index: 10;"></div>
  <div id="right-stick" style="user-select: none; -webkit-tap-highlight-color: transparent; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; position: fixed; right: 7vw; bottom: 0; width: 40vw; height: 60vh; z-index: 10;"></div>

  <button id="toggle-crossover" class="control-square-button" style="
    position: absolute;
    left: 20px;
    top: 20px;
    padding: 10px;
    font-size: 14px;
    z-index: 10;
    backdrop-filter: blur(4px); /* iOSっぽいガラス感 */
    ">ランダム立体交差（クアトロ交差）切替</button>

  <div id="frontViewButtons" style="position: fixed; top: 20px; right: 20px; z-index: 100;">
    <button class="frontViewBtn" data-train="1">1番線</button>
    <button class="frontViewBtn" data-train="2">2番線</button>
    <button class="frontViewBtn" data-train="3">3番線</button>
    <button class="frontViewBtn" data-train="4">4番線</button>
  </div>
  
  <!-- 🌞 昼夜切り替えボタン -->
  <button id="toggle-daynight" style="
    position: fixed;
    top: 70px;
    left: 20px;
    z-index: 10;
    padding: 10px 15px;
    font-size: 16px;
    border-radius: 8px;
  ">🌙 夜にする</button>
  
  <script type="module" src="js/main.js"></script>
</body>
<style>
  .credits-footer {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255,255,255,0.9);
    padding: 6px 12px;
    font-size: 12px;
    text-align: center;
    z-index: 9999;
    box-shadow: 0 -1px 6px rgba(0,0,0,0.12);
  }
  .credits-footer a { color: #0645ad; text-decoration: underline; }
</style>
<footer class="credits-footer" role="contentinfo" aria-label="出典情報">
  <small>
    データ: PLATEAU（国土交通省）「PLATEAU 3D City Model — 千代田区（建物）」 (CC BY 4.0). 元データ: 
    <a href="https://plateauview.mlit.go.jp/" target="_blank" rel="noopener noreferrer">PLATEAU VIEW</a>. 
    ビジュアライズ: <a href="https://threejs.org/" target="_blank" rel="noopener noreferrer">three.js (r0.169.0, MIT)</a>. 
    変換: <a href="https://github.com/Project-PLATEAU/PLATEAU-GIS-Converter" target="_blank" rel="noopener noreferrer">PLATEAU GIS Converter</a>（release v0.1.2、ダウンロード日: 2025-09-19）。
  </small>
</footer>

</html>